[toc]

# Python - 基础语法

## 一、vars() 和 `__dict__`的区别

`vars()` 和 `__dict__` 都用于访问对象的属性字典，但它们之间有一些细微的区别。下面是这两者的主要特点和区别：

### `__dict__`

- **定义**: `__dict__` 是一个特殊属性，存在于几乎所有的 Python 对象中，表示该对象的属性和它们的值。
- **类型**: `__dict__` 返回的是一个字典（`dict`），其中包含对象的可写属性及其对应的值。
- **访问方式**: 访问 `__dict__` 通常需要直接使用对象名，例如 `obj.__dict__`。
- **可用性**: 适用于大多数用户定义的对象，但对于某些内置类型（如整数、字符串等），可能不存在 `__dict__` 属性。

### `vars()`

- **定义**: `vars()` 是一个内置函数，可以接受一个对象作为参数，并返回该对象的 `__dict__` 属性。
- **类型**: 返回同样是一个字典（`dict`），功能上与 `__dict__` 相似。
- **访问方式**: 可以直接调用 `vars(obj)`，而不需要显式访问 `__dict__`。
- **无参数调用**: 如果不传入参数，`vars()` 会返回当前局部作用域的变量字典，相当于 `locals()`。

### 主要区别

1. **调用方式**:
   - `__dict__` 是属性，需要通过 `obj.__dict__` 来访问。
   - `vars()` 是函数，可以通过 `vars(obj)` 来调用。

2. **无参数情况**:
   - `__dict__` 不能无参数调用，仅能用于对象。
   - `vars()` 可以无参数调用，返回当前作用域的变量字典。

3. **适用场景**:
   - `__dict__` 通常用于具体对象的属性访问，而 `vars()` 更灵活，适合在需要获取对象属性字典时使用。

### 示例比较

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

person = Person("Alice", 30)

# 使用 __dict__
print(person.__dict__)  # 输出: {'name': 'Alice', 'age': 30}

# 使用 vars()
print(vars(person))     # 输出: {'name': 'Alice', 'age': 30}

# 无参数调用 vars()
local_vars = vars()     # 获取当前局部作用域的变量字典
print(local_vars)
```

### 总结

`vars()` 和 `__dict__` 在功能上非常相似，都是用来访问对象的属性字典。选择使用哪一个通常取决于个人偏好和具体上下文。在需要动态访问或获取本地变量时，`vars()` 更加灵活；在直接访问对象属性时，`__dict__` 是更传统的方式。